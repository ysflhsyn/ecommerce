(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1079:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),o=n(94),i=n(454),l=n(93),r=n(461),c=n(854),u=n(463),p=n.n(u),f=n(41),h=n(855);n(455);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),s.forEach(function(e){g(t,e,n[e])})}return t}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object(l.d)({updateSuccessMsg:{id:"excel_item_mapping.update_success_msg",defaultMessage:"Comission updated successfully"},createdSuccessMsg:{id:"excel_item_mapping.create_success_msg",defaultMessage:"Comission created successfully"},deleteSuccessMessage:{id:"excel_item_mapping.delete_success_msg",defaultMessage:"Comission deleted successfully"}});var S=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=y(this,w(n).call(this,e))).state={loading:!1,list:[],selected:null,showForm:!1,initialSearch:!0,filter:{shop:null,file:null},page:0,brandDropdownDefaultOptions:[],categoryDropdownDefaultOptions:[],showColumns:{articuleNumber:!1,barCode:!1,brand:!0,category1:!0,category2:!0,category3:!0,itemName:!0,model:!0,nameAz:!1,nameRu:!1,price:!1,shopDescription:!0}},t.fetchTimeout=!1,t.tableState={page:0,pageSize:10},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,a.a.Component),function(e,t,n){t&&b(e.prototype,t),n&&b(e,n)}(n,[{key:"componentDidMount",value:function(){var t=this;o.a.post("brands/brand/filtered/0/100/YES","",{headers:{"Content-Type":"text/plain"}}).then(function(e){t.setState({brandDropdownDefaultOptions:e.data})}),o.a.post("catalog/categories/filtered/0/100",{concrete:!0,active:"YES"}).then(function(e){t.setState({categoryDropdownDefaultOptions:e.data})})}},{key:"onChangeFilter",value:function(e,t){var n=this,s=d({},this.state.filter,g({},e,t));"shop"===e&&(s.file=null),this.setState({filter:s},function(){return n.getItems()})}},{key:"filterColumn",value:function(e,t){this.setState({showColumns:d({},this.state.showColumns,g({},e,t))})}},{key:"getItems",value:function(a){var i=this;this.fetchTimeout&&clearTimeout(this.fetchTimeout),a=a||this.tableState;this.fetchTimeout=setTimeout(function(){!function(){i.setState({loading:!0,selected:null}),i.tableState=a;var e=i.state.filter,t=e.file,n=e.shop,s={mapped:!0,shopId:n?n.value:null,uploadedFileId:t?t.value:null};o.a.post("item-mapping-excels/item-mapping-excel/filtered?page=".concat(a.page,"&size=").concat(a.pageSize),d({},s)).then(function(e){i.setState({list:e.data.content,loading:!1,initialSearch:!1,page:Math.ceil(e.data.totalElements/a.pageSize)})})}()},0)}},{key:"onClickRow",value:function(e){}},{key:"dissmissAlert",value:function(){this.setState({alertMsg:null,sweetAlertMsg:null})}},{key:"submit",value:function(){var t=this;this.setState({saving:!0}),o.a.post("item-mapping-excels/item-mapping-excel/map",this.state.form).then(function(e){t.setState({mapped:!0})}).catch(function(e){t.setState({saving:!1,sweetAlertMsg:e.response.data.message})})}},{key:"render",value:function(){return a.a.createElement(i.f,null,a.a.createElement(i.g,null,a.a.createElement(i.h,null,a.a.createElement(l.a,{id:"excel_item_mapping_approve.title",defaultMessage:"Approve Item Mapping"})),a.a.createElement(f.a,{portal:!0,show:this.state.saving,size:60,delay:800}),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-9"},a.a.createElement(h.a,{hide:this.state.showForm,onChange:this.onChangeFilter.bind(this),filter:this.state.filter,shops:this.state.shops,columns:this.state.showColumns,onFilterColumn:this.filterColumn.bind(this)})),a.a.createElement("div",{className:"col-3"},a.a.createElement(r.a,{onClickRefresh:this.getItems.bind(this)}))),a.a.createElement(i.a,{type:"success",isOpen:!!this.state.alertMsg,toggle:this.dissmissAlert.bind(this)},this.state.alertMsg),a.a.createElement(p.a,{show:!!this.state.sweetAlertMsg,error:!0,confirmBtnText:"Ok",confirmBtnBsStyle:"danger",btnSize:"xs",title:"",onConfirm:this.dissmissAlert.bind(this),onCancel:this.dissmissAlert.bind(this)},this.state.sweetAlertMsg),a.a.createElement(c.a,{show:!this.state.showForm,loading:this.state.loading,list:this.state.list,onClickRow:this.onClickRow.bind(this),selectedIndex:this.state.selected,pages:this.state.page,initialSearch:this.state.initialSearch,onFetchData:this.getItems.bind(this),categoryDefaultOptions:this.state.categoryDropdownDefaultOptions,brandDefaultOptions:this.state.brandDropdownDefaultOptions,showColumns:this.state.showColumns,isMapped:!0})))}}]),n}();t.default=Object(l.e)(S)}}]);